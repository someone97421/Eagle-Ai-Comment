<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eagle AI Comment</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* 针对输入框的小修复，防止内容太长看不清 */
        input[type="text"] {
            font-family: monospace; /* 使用等宽字体，方便核对Key */
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="tabs">
            <div class="tab-item active" data-target="view-run">运行</div>
            <div class="tab-item" data-target="view-settings">设置</div>
        </div>

        <div id="view-run" class="view-content active">
            <div class="status-box">
                <p>已选中图片：<span id="selected-count" class="highlight">0</span> 张</p>
                <div class="tip">请在 Eagle 列表中选中图片</div>
            </div>
            
            <button id="btn-run" class="btn-primary">开始生成注释</button>
            
            <div class="log-container">
                <div class="log-header">运行日志</div>
                <div id="console-log" class="log-body"></div>
            </div>
        </div>

        <div id="view-settings" class="view-content">
            <div class="form-group">
                <label>API 地址 (Base URL)</label>
                <input type="text" id="cfg-url" placeholder="例如 https://dashscope.aliyuncs.com/compatible-mode/v1">
                <div class="desc">不用填 /chat/completions 后缀，插件会自动加。</div>
            </div>
            
            <div class="form-group">
                <label>API Key (已开启明文显示)</label>
                <input type="text" id="cfg-key" placeholder="sk-..." autocomplete="off">
            </div>

            <div class="form-group">
                <label>模型名称 (Model)</label>
                <input type="text" id="cfg-model" placeholder="例如 qwen-vl-max">
            </div>

            <div class="divider">图像处理</div>

            <div class="form-group">
                <label>长边限制 (像素)</label>
                <input type="number" id="cfg-resize" value="1024">
                <div class="desc">图片过大极其消耗 Token 且容易报错，建议 1024。</div>
            </div>

            <div class="divider">LLM 参数</div>

            <div class="form-group">
                <label>系统提示词 (System Prompt)</label>
                <textarea id="cfg-prompt" rows="5">你是一个专业的视觉设计师。请简短地描述这张图片的视觉元素、风格、颜色和潜在用途。</textarea>
            </div>

            <div class="row">
                <div class="form-group half">
                    <label>温度 (Temp)</label>
                    <input type="number" id="cfg-temp" step="0.1" value="0.7">
                </div>
                <div class="form-group half">
                    <label>Token上限</label>
                    <input type="number" id="cfg-tokens" value="1024">
                </div>
            </div>

            <div class="form-group checkbox-row">
                <input type="checkbox" id="cfg-reasoning">
                <label for="cfg-reasoning">启用推理模式 (如 o1/o3)</label>
            </div>

            <button id="btn-save" class="btn-secondary">保存设置</button>
        </div>
    </div>

    <script src="js/plugin.js"></script>
</body>
</html>